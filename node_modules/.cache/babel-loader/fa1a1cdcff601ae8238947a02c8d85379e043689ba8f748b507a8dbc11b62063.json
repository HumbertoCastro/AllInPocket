{"ast":null,"code":"import _defineProperty from\"/home/humberto/all-in-pocket/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _toConsumableArray from\"/home/humberto/all-in-pocket/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/humberto/all-in-pocket/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from'react';import TransactionCard from'../TransactionCard/TransactionCard';import pocketContext from'../../../context/pocketContext';import InputText from'../../Inputs/InputText/InputText';import svgs from'../../../helpers/svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MonthExpenses=function MonthExpenses(_ref){var month=_ref.month,finances=_ref.finances,callback=_ref.callback;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useContext=useContext(pocketContext),exTypes=_useContext.exTypes,setExtypes=_useContext.setExtypes;var newTypes=exTypes.map(function(tipo){return _defineProperty({},tipo,_toConsumableArray(finances.filter(function(x){return x.month===month;})[0].expenses.filter(function(x){return x.type===tipo;})).sort(function(a,b){return b.date-a.date;}));});var handleChange=function handleChange(_ref3){var value=_ref3.target.value;if(value.length>0){setName(value);}};var handleClick=function handleClick(){if(name.length){setExtypes([].concat(_toConsumableArray(exTypes),[name]));setName('');localStorage.setItem('exTypes',JSON.stringify([].concat(_toConsumableArray(exTypes),[name])));}};var deleteCategory=function deleteCategory(category){setExtypes(exTypes.filter(function(x){return x!==category;}));localStorage.setItem('exTypes',JSON.stringify(exTypes.filter(function(x){return x!==category;})));};return/*#__PURE__*/_jsxs(\"div\",{className:\"month-expenses\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(InputText,{placename:\"set new category\",callback:handleChange}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,children:svgs.plus()})]}),newTypes.sort(function(a,b){var varA=_toConsumableArray(Object.values(a)[0]);var varB=_toConsumableArray(Object.values(b)[0]);if(varA.length>0&&varB.length===0){return-1;}else if(varA.length===0&&varB.length>0){return 1;}else if(varA.length===0&&varB.length===0){return 0;}else{if(varA.reduce(function(total,x){return x.value+total;},0)>varB.reduce(function(total,x){return x.value+total;},0)){return-1;}else if(varA.reduce(function(total,x){return x.value+total;},0)<varB.reduce(function(total,x){return x.value+total;},0)){return 1;}else{return 0;}}}).map(function(x){return/*#__PURE__*/_jsx(TransactionCard,{array:x,color:\"red\",callback:callback,finances:finances,month:month,isProfit:false,deleteCategory:deleteCategory});})]});};MonthExpenses.defaultProps={};export default MonthExpenses;","map":{"version":3,"names":["React","useContext","useState","TransactionCard","pocketContext","InputText","svgs","jsx","_jsx","jsxs","_jsxs","MonthExpenses","_ref","month","finances","callback","_useState","_useState2","_slicedToArray","name","setName","_useContext","exTypes","setExtypes","newTypes","map","tipo","_defineProperty","_toConsumableArray","filter","x","expenses","type","sort","a","b","date","handleChange","_ref3","value","target","length","handleClick","concat","localStorage","setItem","JSON","stringify","deleteCategory","category","className","children","placename","onClick","plus","varA","Object","values","varB","reduce","total","array","color","isProfit","defaultProps"],"sources":["/home/humberto/all-in-pocket/src/components/FinanceComponents/MonthExpenses/MonthExpenses.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport TransactionCard from '../TransactionCard/TransactionCard';\nimport pocketContext from '../../../context/pocketContext';\nimport InputText from '../../Inputs/InputText/InputText';\nimport svgs from '../../../helpers/svg';\n\nconst MonthExpenses = ({ month, finances, callback }) => {\n  const [name, setName] = useState('');\n\n  const {\n    exTypes,\n    setExtypes,\n  } = useContext(pocketContext);\n\n  const newTypes = exTypes.map((tipo) => {\n    return {\n      [tipo]: [...finances.filter((x) => x.month === month)[0].expenses.filter((x) => x.type === tipo)].sort((a, b) => {\n        return b.date - a.date\n      }),\n    }\n  })\n\n  const handleChange = ({ target: { value } }) => {\n    if (value.length > 0 ) {\n      setName(value);\n    }\n  }\n\n  const handleClick = () => {\n    if (name.length) {\n      setExtypes([...exTypes, name]);\n      setName('');\n      localStorage.setItem('exTypes', JSON.stringify([...exTypes, name]));\n    }\n  }\n\n  const deleteCategory = (category) => {\n    setExtypes(exTypes.filter((x) => x !== category));\n    localStorage.setItem('exTypes', JSON.stringify(exTypes.filter((x) => x !== category)));\n  }\n\n  return (\n    <div className='month-expenses'>\n      <div className='row'>\n        <InputText placename=\"set new category\" callback={ handleChange }/>\n        <button onClick={ handleClick }>{ svgs.plus() }</button>\n      </div>\n      {\n        newTypes.sort((a,b) => {\n          const varA = [...Object.values(a)[0]];\n          const varB = [...Object.values(b)[0]];\n          if (varA.length > 0 && varB.length === 0 ) {\n            return -1;\n          } else if (varA.length === 0 && varB.length > 0) {\n            return 1;\n          } else if (varA.length === 0 && varB.length === 0) {\n            return 0;\n          } else {\n            if (varA.reduce((total, x) => x.value + total, 0) > varB.reduce((total, x) => x.value + total, 0)) {\n              return -1;\n            } else if (varA.reduce((total, x) => x.value + total, 0) < varB.reduce((total, x) => x.value + total, 0)) {\n              return 1;\n            } else {\n              return 0;\n            }\n          }\n        }).map((x) => {\n          return (\n            <TransactionCard  array={ x } color=\"red\" callback={ callback } finances={ finances } month={ month } isProfit={false} deleteCategory={deleteCategory} />\n          )\n        })\n      }\n    </div>\n  )\n}\n\nMonthExpenses.propTypes = {};\n\nMonthExpenses.defaultProps = {};\n\nexport default MonthExpenses;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}